<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title></title>
	<link rel="stylesheet" href="styles/site.css">
</head>
<body>


<main>
</main>






<script>
	
	const outlet = document.querySelector('main');

	function renderTemplate(template) {
		outlet.innerHTML = template;
	}




	function renderFooterLanding() {
		return `<footer class="landing">
			<nav>
				<button id="login-page">Login page</button>
				<button id="new-user">New user</button>
			</nav>
		</footer>`;
	}





	var userInputs = {
		"genre": undefined,
		"decade": undefined,
		"speed": undefined
	};




	var siteTitle = "Music playlist app";

	var landingTemplate =

		`<h1>${siteTitle}</h1>
		<p>This app creates a custom setlist based on the choices you make!
		</p><p>The app draws from the Musicbrainz database, a public source of music data containing info on millions of songs from around the world.</p>

		${renderFooterLanding()}`;

	var loginTemplate = 

		`<h1>login page</h1> 
		<form>
			<label>Username</label>
			<input class="username" type='text'>

			<label>Password</label>
			<input class="password" type='text'>

			<button id="home">Home</button>

			<button id="user-signin">Sign in</button>
		</form>`;

	var newUserTemplate = `

		<h1>create a username and password below!</h1>
			<form>

			<label>Username</label>
			<input type='text'>

			<label>Password</label>
			<input type='text'>

			<button id="create-signin">Create & sign in</button>

			<button id="home">Home</button>

		</form>`;


	var welcomeNewTemplate = 

		`<h1>welcome, (username)!</h1>

		<p>This is your first time here.</p>
		<p>Let's make your first setlist!</p>

		<button id="create-new-list">Let's go</button>

		<footer class="signed-in two">

			<div class="username">
				<p>Username</p>
			</div>
			<button id="signout">Sign out</button>

		</footer>`; 

	var welcomeBackTemplate = 

		`<h1>welcome back, (username)!</h1>

		<p>You can either create a new setlist now or retreive one you've already made.</p>


		<button id="create-new-list">Create new list</button>

		<button id="view-setlists">View setlists</button>


		<footer class="signed-in two">

			<div class="username">
				<p>Username</p>
			</div>
			<button id="signout">Sign out</button>

		</footer>`;

	// var traitsTemplate = 

	// 	`<h1>choose your traits!</h1>

	// 	<form>

	// 		<div class="field radio">
	// 			<input id="genre" type='radio'>
	// 			<label for="genre">genre</label>
	// 		</div>

	// 		<div class="field radio">
	// 			<input id="decade" type='radio'>
	// 			<label for="decade">decade</label>
	// 		</div>

	// 		<div class="field radio">
	// 			<input id="speed" type='radio'>
	// 			<label for="speed">speed</label>
	// 		</div>

	// 	</form>

	// 	<button id="choose-genres">Choose genres =></button>

	// 	<footer class="signed-in two">

	// 		<div class="username">
	// 			<p>Username</p>
	// 		</div>
	// 		<button id="signout">Sign out</button>

	// 	</footer>`;



		//for radio options...if they all have the same name they'll be aware of each other
	var genreTemplate =

		`<h1>choose your genres!</h1>



		<form class="genre-form">

			<div class="field radio">
				<input name="genre-option"id="jazz" type='radio'>
				<label for="jazz">jazz</label>
			</div>

			<div class="field radio">
				<input name="genre-option"id="country" type='radio'>
				<label for="country">country</label>
			</div>

			<div class="field radio">
				<input name="genre-option"id="rock" type='radio'>
				<label for="rock">rock</label>
			</div>

			<div class="field radio">
				<input name="genre-option"id="bollywood" type='radio'>
				<label for="bollywood">bollywood</label>
			</div>

			<div class="field radio">
				<input name="genre-option"id="classical" type='radio'>
				<label for="classical">classical</label>
			</div>

		</form>

		<button id="choose-decade">Choose decade =></button>

		<footer class="signed-in one">

			<div class="username">
				<p>Username</p>
			</div>
			<button id="home">Home</button>
			<button id="signout">Sign out</button>

		</footer>`;

	function selectGenre(selectedGenre){
		//put the selected radio option as a value in userInputs
		userInputs.genre = selectedGenre;
	}





	// window.addEventListener('input', function(event) {
	// 	//if an option is checked
	// 	console.log(event.target('id'));
	// });




	var decadeTemplate = 

		`<h1>choose a decade!</h1>

		<div class='field range'>
			<input id="decade-value" type='range' min='1000' max='2022'>
			<label for="decade-value">1990</label>
		</div>

		<button id="choose-speed">Choose speed =></button>

		<footer class="signed-in one">

			<div class="username">
				<p>Username</p>
			</div>
			<button id="home">Home</button>
			<button id="signout">Sign out</button>

		</footer>`;




	var speedTemplate = 

		`<h1>pick your speed...</h1>

		<form>
			<div class="field radio">
				<input id="single-speed" type='radio'>
				<label for="single-speed">Single speed</label>
			</div>

			<div class="field radio">
				<input id="range" type='radio'>
				<label for="range">range</label>
			</div>

		</form>


		  <div class='field range'>
		    <input type='range' min='60' max='180'>
		    <label></label>
		  </div>
		


		<form>

		<div class="field radio">
			<input id="description" type='radio'>
			<label for="description">Description</label>
		</div>

		<div class="field radio">
			<input id="bpm" type='radio'>
			<label for="bpm">bpm</label>
		</div>

		</form>


		<button id="create-setlist">Create setlist =></button>

		<footer class="signed-in one">

			<div class="username">
				<p>Username</p>
			</div>
			<button id="home">Home</button>
			<button id="signout">Sign out</button>

		</footer>`;

	var newSetlistTemplate = 

		`<h1>setlist (name here)</h1>


		<ul class="setlist">
			<li>song</li>
			<li>song</li>
			<li>song</li>
		</ul>

		<p>This list will be automatically saved in your profile.</p>


		<button id="create-new-list">Create new list</button>

		<button id="view-setlists">View setlists</button>


		<footer class="signed-in">

			<div class="username">
				<p>Username</p>
			</div>
			<button id="home">Home</button>
			<button id="signout">Sign out</button>

		</footer>`;


	var viewSetlistsTemplate =

		`<h1>Click on a setlist to view it!</h1>

		<ul class="setlist-view">
			<li id="setlist1">setlist</li>
			<li id="setlist2">setlist</li>
			<li id="setlist3">setlist</li>
		</ul>


		<button id="create-new-list">Create new list</button>


		<footer class="signed-in one">

			<div class="username">
				<p>Username</p>
			</div>
			<button id="signout">Sign out</button>

		</footer>`;


		//default page
	outlet.innerHTML = loginTemplate;
	document.querySelector('input.username').value = 'ned';
	document.querySelector('input.password').value = 'hashbrowns';


	var users = [
		{
			"username": "ned",
			"password": "hashbrowns"
		},
		{
			"username": "user2",
			"password": "broccoli"
		}
	];





	function signinUser(users, userName, passWord) {
		
		//look at list of users
		for (const user of users) {
			console.log(user.username);
		
			//if username exists
			if(userName == user.username && passWord == user.password) {
				return true;
			} else {
				return false;
			}
		}
	}

	//test for password validation
	console.log(signinUser(users, 'ned', 'break'));







	window.addEventListener('click', function (event) {


		if(event.target.matches('#home')) {
			outlet.innerHTML = landingTemplate;
		}

		//IF EVENT TARGET matches home and user is not logged in

		if(event.target.matches('#signout')) {
			outlet.innerHTML = landingTemplate;
		}

		//combine the above two


		if(event.target.matches('#login-page')) {
			outlet.innerHTML = loginTemplate;
		}

		if(event.target.matches('#new-user')) {
			outlet.innerHTML = newUserTemplate;
		}

		if(event.target.matches('#create-signin')) {
			outlet.innerHTML = welcomeNewTemplate;
		}



		if(event.target.matches('#user-signin')) {

			var form = event.target.closest('form');
			var givenUserName = form.querySelector('input.username').value;
			var givenPassword = form.querySelector('input.password').value;

			if (signinUser(users, givenUserName, givenPassword) ) {
				outlet.innerHTML = welcomeBackTemplate;
			} else {
				alert("The password didn't match!");
			}
		}


		if(event.target.matches('#create-new-list')) {
			outlet.innerHTML = genreTemplate;
		}



		if(event.target.matches('#choose-decade')) {


			let output = document.querySelector('input[name="genre-option"]:checked').id;

			userInputs.genre = output;

			console.log(output);
			console.log(userInputs.genre);
			outlet.innerHTML = decadeTemplate;

			document.querySelector('input#decade-value')
				.addEventListener('input', function() {
				console.log('hi');
				document.querySelector('label[for="decade-value"]').textContent = this.value;
				users.decade = this.value;
				console.log('hi');
				console.log(this.value);
				console.log(this);


			});

		}

		if(event.target.matches('#choose-speed')) {
			outlet.innerHTML = speedTemplate;
		}
	
		if(event.target.matches('#create-setlist')) {
			outlet.innerHTML = newSetlistTemplate;
		}
		if(event.target.matches('#view-setlists')) {
			outlet.innerHTML = viewSetlistsTemplate;
		}

	});

	


















</script>

</body>
</html>

