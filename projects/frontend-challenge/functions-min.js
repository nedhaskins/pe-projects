async function fetchData(){try{return(await fetch("https://raw.githubusercontent.com/neodigm/FED_Programming_Challenge/gh-pages/products.json")).json()}catch(t){console.log(t)}}async function transformData(){return(await fetchData()).reduce((function(t,e){var n=t.find((function(t){return t.name===e.cat}));return n?n.products.push({name:e.product,price:new Intl.NumberFormat("us-US",{style:"currency",currency:"USD"}).format(e.price),sale:new Intl.NumberFormat("us-US",{style:"currency",currency:"USD"}).format(e.sale),isFavorited:!1,photo:e.cat+"/"+e.product+".jpg"}):t.push({name:e.cat,products:[{name:e.product,price:new Intl.NumberFormat("us-US",{style:"currency",currency:"USD"}).format(e.price),sale:new Intl.NumberFormat("us-US",{style:"currency",currency:"USD"}).format(e.sale),isFavorited:!1,photo:e.cat+"/"+e.product+".jpg"}]}),t}),[])}async function renderData(){var t=await transformData();renderHomeView(t),console.log(t)}function renderHomeView(t){var e='<ul class="category-list">';t.forEach((function(t){e+=`<li class='category' data-id="${t.name}">${renderCategory(t)}</li>`})),e+="</ul>",outlet.innerHTML=e}function detailsOpenCheck(t){return openMenus.find((e=>e===t))?"<details open>":"<details>"}function renderCategory(t){return`\n\t\t\t${detailsOpenCheck(t.name)}\n\t\t\t\t<summary>\n\t\t\t\t\t<h2>${t.name}</h2>\n\t\t\t\t\t<icon-wrapper>\n\t\t\t\t\t\t<svg class="arrow" width="100%" height="100%" viewBox="0 0 347 400" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><path d="M346.326,199.957l-346.326,199.958l-0,-399.915l346.326,199.957Z"/></svg>\n\t\t\t\t\t</icon-wrapper>\n\t\t\t\t</summary>\n\t\t\t\t<div class="products">${renderProducts(t.products)}</div>\n\t\t\t</details>\n\t\t\t`}function renderProducts(t){var e='<ul class="product-list">';return t.forEach((function(t){e+=`<li>${renderCard(t)}</li>`})),e+="</ul>"}function randomPhoto(t){return t[Math.floor(Math.random()*t.length)]}function iconClass(t){return favorites.find((e=>e.name===t.name))?"active":""}function renderCard(t){return`\n\t\t<product-card data-id="${t.name}">\n\t\t\t<picture>\n\t\t\t\t<img src="photos/${t.photo}" alt="${t.name}">\n\t\t\t\t</img>\n\t\t\t\t<button class="favorite-toggle ${iconClass(t)}" data-gtag="favorite_trigger">\n\t\t\t\t\t<svg\n\t\t\t\t\t\twidth="100%"\n\t\t\t\t\t\theight="100%"\n\t\t\t\t\t\tviewBox="0 0 258 190"\n\t\t\t\t\t\tversion="1.1"\n\t\t\t\t\t\txmlns="http://www.w3.org/2000/svg"\n\t\t\t\t\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\t\t\t\t\txml:space="preserve"\n\t\t\t\t\t\txmlns:serif="http://www.serif.com/"\n\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\tfill-rule: evenodd;\n\t\t\t\t\t\t\tclip-rule: evenodd;\n\t\t\t\t\t\t\tstroke-linecap: round;\n\t\t\t\t\t\t\tstroke-linejoin: round;\n\t\t\t\t\t\t\tstroke-miterlimit: 1.5;\n\t\t\t\t\t\t"">\n\t\t\t\t\t\t<path class="heart"\n\t\t\t\t\t\t\td="M128.956,45.358c25.832,-46.015 77.498,-46.015 103.331,-27.609c25.833,18.406 25.833,55.218 -0,92.029c-18.083,27.609 -64.582,55.218 -103.331,73.624c-38.75,-18.406 -85.248,-46.015 -103.331,-73.624c-25.833,-36.811 -25.833,-73.623 -0,-92.029c25.832,-18.406 77.498,-18.406 103.331,27.609Z"></path>\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</picture>\n\t\t\t<div class="item-name">\n\t\t\t\t<h3 class="name">${t.name}</h3>\n\t\t\t</div>\n\t\t\t<div class="prices">\n\t\t\t\t<p class="price">${t.price}</p>\n\t\t\t\t<p class="sale">${t.sale}</p>\n\t\t\t</div>\n\t\t</product-card>\n\t`}function renderAboutView(){outlet.innerHTML='\n\t\t<section class="about">\n\t\t\t<p>The objective of this project was to use native HTML, CSS and JavaScript to craft<br>a simple frontend prototype for an e-commerce site.</p>\n\t\t\t<p>Click <a href="https://github.com/neodigm/FED_Programming_Challenge/blob/gh-pages/Advanced_FED_Programming_Challenge.pdf">here</a> to view the project requirements!</p>\n\t\t\t<p>Click <a href="#">here</a> to read an in-depth case study of the project.</p>\n\t\t</section>'}function renderFavoritesView(){if(favorites){var t='\n\t\t\t<div class="favorites">\n\t\t\t\t<h2>favorites</h2>\n\t\t\t\t<ul class="product-list">';favorites.forEach((e=>{t+=`<li>${renderCard(e)}</li>`})),t+="</ul></div>",outlet.innerHTML=t}}function renderContactView(){outlet.innerHTML="\n\t\t<div class='contact'>\n\t\t\t<h1>Want to learn more?</h1>\n\t\t\t<p>Ned Haskins is a web designer based in Richmond, Virginia.</p>\n\t\t\t<p>He loves to connect with clients and work with them to achieve their goals!</p>\n\t\t\t<p>Email him at <a href=\"mailto:hello@nedhaskins.io\">hello@nedhaskins.io</a> to start a conversation!</p>\n\t\t</div>\n\t"}function addEventListeners(){outlet.addEventListener("click",(t=>{const e=t.target.closest(".category")?.dataset.id,n=t.target.closest("details");if("BUTTON"===t.target.tagName){const n=t.target.closest("product-card").dataset.id,r=t.target.closest("product-card").querySelector(".price").textContent,a=t.target.closest("product-card").querySelector(".sale").textContent;if(t.target.classList.contains("active")){if(t.target.classList.contains("active")){const e=favorites.filter((t=>t.name!=n));favorites=[...e],localStorage.setItem("favorites",JSON.stringify(favorites)),console.log(`${n} was removed from local storage.`,favorites),t.target.classList.remove("active"),"favorites"===t.target.closest("div").className&&renderFavoritesView()}}else{const o={category:e,name:n,price:r,sale:a,isFavorited:!0,photo:e+"/"+n+".jpg"};favorites.push(o),localStorage.setItem("favorites",JSON.stringify(favorites)),console.log(`${n} was added to local storage successfully`,favorites),t.target.classList.add("active")}}if("ICON-WRAPPER"===t.target.tagName)if(n.open){const t=openMenus.filter((t=>t!=e));openMenus=[...t],localStorage.setItem("openMenus",JSON.stringify(openMenus)),console.log("This menu is closed and it's been removed from local storage!")}else openMenus.push(e),localStorage.setItem("openMenus",JSON.stringify(openMenus)),console.log("This menu is open and it's been stored in local storage!")})),header.addEventListener("click",(t=>{t.preventDefault(),"home"===t.target.id&&renderData(),"about"===t.target.id&&renderAboutView(),"favorites"===t.target.id&&renderFavoritesView(),"contact"===t.target.id&&renderContactView()}))}